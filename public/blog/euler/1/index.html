<!DOCTYPE html>
<html>
  <head><meta charset="utf-8" />
<meta name="google-site-verification" content="yMFFIOIN7PiAoCbBJmLSutrBWZCfjqM7intNsFjKXew" />
<meta name="robots" content="index,follow">

<meta name="author" content="Gautam Manohar" />
<meta name="copyright" content="Gautam Manohar" />
<meta name="date" content="2018-06-09" />
<meta name="description" content="My solution to problem 1 of Project Euler.">
<meta name="keywords" content="identity, { .Section }}" /><title>Problem 1 - Multiples of 3 and 5 &ndash; Gautam Manohar</title><meta name="msapplication-TileImage"           content="/img/favicons/mstile-144x144.png" />
<meta name="msapplication-config"              content="/img/favicons/browserconfig.xml" />
<meta name="msapplication-TileColor" content="#da532c" />
<meta name="theme-color"             content="#ffffff" />
<link rel="apple-touch-icon"      sizes="180x180" href="/img/favicons/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32"   href="/img/favicons/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="192x192" href="/img/favicons/android-chrome-192x192.png" />
<link rel="icon" type="image/png" sizes="16x16"   href="/img/favicons/favicon-16x16.png" />
<link rel="manifest"                              href="/img/favicons/manifest.json" />
<link rel="mask-icon"  color="#5bbad5"            href="/img/favicons/safari-pinned-tab.svg" />
<link rel="shortcut icon"                         href="/img/favicons/favicon.ico" />
    <link rel="stylesheet" href="https://gautammanohar.com/css/all.css" type="text/css" /><style>
.title .math {
  font-size: 50% !important;
}
</style>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  "HTML-CSS": {
  styles: {
  ".MathJax .mo, .MathJax .mi, .math": {color: "black;"}}
  },
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],displayMath: [['$$','$$'], ['\[','\]']],processEnvironments: true,processEscapes: true}
  });
  MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Config({
      "HTML-CSS": {
        scale: 100,
        availableFonts: [],
        preferredFont: null,
        webFont: "Latin-Modern"
      }
    });
    MathJax.Hub.Config({
      TeX: {
        equationNumbers: {  autoNumber: "all"  },
      }
    });
</script>
<div class="invisible">
  \(
  \let\Pr\relax
  \DeclareMathOperator\LCM{LCM}
  \DeclareMathOperator\Pr{P}
  \DeclareMathOperator\arccot{arccot}
  \newcommand{\Mod}[1]{\ (\mathrm{mod}\ #1 )}
  \renewcommand{\vec}[1]{\mathbf{ #1 }}
  \newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
  \newcommand{\abs}[1]{\lvert #1 \rvert}
  \newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}

  \newcommand{\inn}[1]{\in\left\{ #1 \right\}}
  \newcommand{\ninn}[1]{\not\in\left\{ #1 \right\}}
  \newcommand{\orr}{\qquad&amp;\,\text{or}\qquad}

  \renewcommand\d{\mathop{}\!\mathrm{d}}
  \newcommand{\diff}[2]{\frac{\d #1}{\d #2}}
  \newcommand{\qed}{\begin{equation*}\tag*{$\blacksquare$}\end{equation*}}
  \DeclareMathOperator\G{\Gamma}
  \DeclareMathOperator\I{\mathscr{I}}
  \)
</div>
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>
</head>
  <body>
<article class="article"><header>
  <h1 class="title">
    <a href="https://gautammanohar.com/blog/euler/1/" rel="bookmark" title ="Link to Problem 1 - Multiples of 3 and 5">Problem 1 - Multiples of 3 and 5</a>
  </h1>
  
  <address class="author">Gautam Manohar</address>
  <div id="textbox">
    <p style="font-weight: bold;" class="alignleft">
      <a href="https://gautammanohar.com/blog/euler/" title="Posts in section euler">euler</a>&nbsp;
    </p>
    <p class="date aligncenter">9 Jun 2018</p>
    <strong style="font-variant: normal;" class="alignright"><a title="Posts tagged identity" href="/tags/identity">#identity </a></strong>
  </div>
  <div style="clear: both;"></div>​
</header>

<h1 id="problem-statement">Problem Statement</h1>

<p>If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9.
The sum of these multiples is 23.</p>

<p>Find the sum of all the multiples of 3 or 5 below $n$.</p>

<h1 id="my-algorithm">My Algorithm</h1>

<p>For the Project Euler problem, $n = 1000$.</p>

<p>In general, the sum of the natural numbers up to $n$ is the $n$-th <a href="https://en.wikipedia.org/wiki/Triangular_number">triangular number</a>.
Let&rsquo;s call this $T(n)$.
A well known formula for this is
\begin{equation}
    T(n) = \sum_{i=1}^n i = \frac{n(n+1)}{2}.
    \label{triangular-num}
\end{equation}</p>

<p>The sum of all multiples of 3 below $n$ looks like this:
\begin{equation}
    1\cdot3 + 2\cdot 3 + 3 \cdot 3 + \ldots + \floor{\frac{n-1}{3}} \cdot 3.
    \label{3-list}
\end{equation}
We can factor 3 out and write \eqref{3-list} as $3T\floor{\frac{n-1}{3}}$, which we know how to find with \eqref{triangular-num}.
We can do the same thing with 5.</p>

<p>But now we&rsquo;ve overcounted!
Each multiple of 15 under $n$ has been counted twice: once as a multiple of 3, then again as a multiple of 5.
We can fix this by subtracting the sum of all multiples of 15 under $n$.
And so our desired answer is
\begin{equation}
    3T\floor{\frac{n-1}{3}} + 5T\floor{\frac{n-1}{5}} - 15T\floor{\frac{n-1}{15}}.
\end{equation}
The complexity of this solution is $O(1)$, because our answer is just a computation.</p>

<h2 id="other-solutions">Other Solutions</h2>

<p>A brute-force solution that adds each number $i$ from 1 to $n-1$ to a count if $i$ is divisible by 3 <em>or</em> 5 would have time complexity $O(n)$.
With the large input sizes of the Hackerrank problem ($n \le 10^9$) this solution is too slow, but it easily passes the original Project Euler problem.</p>


<h1 id="my-code">My Code</h1>
<div class="euler-code"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">T</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>

<span class="c1"># Implement eq. (1)</span>
<span class="k">def</span> <span class="nf">triangular</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>

<span class="c1"># These are the terms in eq. (3)</span>
<span class="k">def</span> <span class="nf">sum_under</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">):</span>
	<span class="k">return</span> <span class="n">m</span><span class="o">*</span><span class="n">triangular</span><span class="p">((</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="n">m</span><span class="p">)</span>

<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">T</span><span class="p">):</span>
	<span class="n">N</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
	<span class="k">print</span><span class="p">(</span><span class="n">sum_under</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">sum_under</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="o">-</span> <span class="n">sum_under</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
</pre></div>
</td></tr></table>
</div>
<p>This code has2 comments and3 empty lines.</p>
  <h1 id="Performance">Performance</h1>
  <p>My code solves the original Project Euler problem in <span style="font-weight: bold" class="fast">less than 0.1 s</span> with a peak memory usage of <span style="font-weight: bold" class="fast">8.7 KB</span>.</p>

<h2 id="Difficulty">Difficulty</h2>
<p><a href="https://projecteuler.net/problem=1">Project Euler</a> ranks this problem at5% difficulty (out of 100%). <a href="https://www.hackerrank.com/contests/projecteuler/challenges/euler%25!d%28string=001%29">HackerRank</a> classifies this problem aseasy.</p><h1 id="progress">Progress</h1>
<p><emph>Click on a problem's number to see my solution for it.</emph></p>
<table class="legend euler">
  <tr>
    <td><div class="euler-circle complete"></td></div>
    <td class="text">
      Solution solves problem correctly on Project Euler and scores 100% on Hackerrank.
    </td>
  </tr>
  <tr>
    <td><div class="euler-circle hackerrank-imperfect"></td></div>
    <td class="text">
      Solution scores less than 100% on Hackerrank, but still solves the original problem.
    </td>
  </tr>
  <tr>
    <td><div class="euler-circle euler-only"></td></div>
    <td class="text">
      Solution relevant only to Project Euler (problem not on Hackerrank or changed too much).
    </td>
  </tr>
  <tr>
    <td><div class="euler-circle tle"></td></div>
    <td class="text">
      Solution exceeds either the given time limit of 60 seconds or memory limit of 256 MB.
    </td>
  </tr>
  <tr>
    <td><div class="euler-circle unsolved"></td></div>
    <td class="text">
      Problem has not been solved.
    </td>
  </tr>
</table>




  


  <table class="map euler">
    
      
        <tr>
          
            
            
              <td class="complete">
                1
              </td>
            
          
            
            
              <td class="complete">
                2
              </td>
            
          
            
            
              <td class="complete">
                3
              </td>
            
          
            
            
              <td class="complete">
                4
              </td>
            
          
            
            
              <td class="complete">
                5
              </td>
            
          
            
            
              <td class="complete">
                6
              </td>
            
          
            
            
              <td class="complete">
                7
              </td>
            
          
            
            
              <td class="complete">
                8
              </td>
            
          
            
            
              <td class="complete">
                9
              </td>
            
          
            
            
              <td class="complete">
                10
              </td>
            
          
            
            
              <td class="complete">
                11
              </td>
            
          
            
            
              <td class="complete">
                12
              </td>
            
          
            
            
              <td class="complete">
                13
              </td>
            
          
            
            
              <td class="complete">
                14
              </td>
            
          
            
            
              <td class="complete">
                15
              </td>
            
          
            
            
              <td class="complete">
                16
              </td>
            
          
            
            
              <td class="complete">
                17
              </td>
            
          
            
            
              <td class="complete">
                18
              </td>
            
          
            
            
              <td class="hackerrank-imperfect">
                19
              </td>
            
          
            
            
              <td class="complete">
                20
              </td>
            
          
        </tr>
      
    
      
        <tr>
          
            
            
              <td class="complete">
                21
              </td>
            
          
            
            
              <td class="complete">
                22
              </td>
            
          
            
            
              <td class="complete">
                23
              </td>
            
          
            
            
              <td class="complete">
                24
              </td>
            
          
            
            
              <td class="complete">
                25
              </td>
            
          
            
            
              <td class="unsolved">
                26
              </td>
            
          
            
            
              <td class="complete">
                27
              </td>
            
          
            
            
              <td class="complete">
                28
              </td>
            
          
            
            
              <td class="unsolved">
                29
              </td>
            
          
            
            
              <td class="complete">
                30
              </td>
            
          
            
            
              <td class="complete">
                31
              </td>
            
          
            
            
              <td class="complete">
                32
              </td>
            
          
            
            
              <td class="unsolved">
                33
              </td>
            
          
            
            
              <td class="complete">
                34
              </td>
            
          
            
            
              <td class="complete">
                35
              </td>
            
          
            
            
              <td class="complete">
                36
              </td>
            
          
            
            
              <td class="complete">
                37
              </td>
            
          
            
            
              <td class="unsolved">
                38
              </td>
            
          
            
            
              <td class="complete">
                39
              </td>
            
          
            
            
              <td class="complete">
                40
              </td>
            
          
        </tr>
      
    
      
        <tr>
          
            
            
              <td class="complete">
                41
              </td>
            
          
            
            
              <td class="complete">
                42
              </td>
            
          
            
            
              <td class="unsolved">
                43
              </td>
            
          
            
            
              <td class="complete">
                44
              </td>
            
          
            
            
              <td class="unsolved">
                45
              </td>
            
          
            
            
              <td class="complete">
                46
              </td>
            
          
            
            
              <td class="complete">
                47
              </td>
            
          
            
            
              <td class="complete">
                48
              </td>
            
          
            
            
              <td class="unsolved">
                49
              </td>
            
          
            
            
              <td class="unsolved">
                50
              </td>
            
          
            
            
              <td class="unsolved">
                51
              </td>
            
          
            
            
              <td class="complete">
                52
              </td>
            
          
            
            
              <td class="complete">
                53
              </td>
            
          
            
            
              <td class="unsolved">
                54
              </td>
            
          
            
            
              <td class="complete">
                55
              </td>
            
          
            
            
              <td class="complete">
                56
              </td>
            
          
            
            
              <td class="complete">
                57
              </td>
            
          
            
            
              <td class="complete">
                58
              </td>
            
          
            
            
              <td class="unsolved">
                59
              </td>
            
          
            
            
              <td class="unsolved">
                60
              </td>
            
          
        </tr>
      
    
      
        <tr>
          
            
            
              <td class="unsolved">
                61
              </td>
            
          
            
            
              <td class="unsolved">
                62
              </td>
            
          
            
            
              <td class="complete">
                63
              </td>
            
          
            
            
              <td class="unsolved">
                64
              </td>
            
          
            
            
              <td class="complete">
                65
              </td>
            
          
            
            
              <td class="unsolved">
                66
              </td>
            
          
            
            
              <td class="complete">
                67
              </td>
            
          
            
            
              <td class="unsolved">
                68
              </td>
            
          
            
            
              <td class="complete">
                69
              </td>
            
          
            
            
              <td class="unsolved">
                70
              </td>
            
          
            
            
              <td class="complete">
                71
              </td>
            
          
            
            
              <td class="complete">
                72
              </td>
            
          
            
            
              <td class="unsolved">
                73
              </td>
            
          
            
            
              <td class="unsolved">
                74
              </td>
            
          
            
            
              <td class="complete">
                75
              </td>
            
          
            
            
              <td class="complete">
                76
              </td>
            
          
            
            
              <td class="complete">
                77
              </td>
            
          
            
            
              <td class="complete">
                78
              </td>
            
          
            
            
              <td class="unsolved">
                79
              </td>
            
          
            
            
              <td class="unsolved">
                80
              </td>
            
          
        </tr>
      
    
      
        <tr>
          
            
            
              <td class="complete">
                81
              </td>
            
          
            
            
              <td class="unsolved">
                82
              </td>
            
          
            
            
              <td class="unsolved">
                83
              </td>
            
          
            
            
              <td class="unsolved">
                84
              </td>
            
          
            
            
              <td class="unsolved">
                85
              </td>
            
          
            
            
              <td class="unsolved">
                86
              </td>
            
          
            
            
              <td class="unsolved">
                87
              </td>
            
          
            
            
              <td class="unsolved">
                88
              </td>
            
          
            
            
              <td class="unsolved">
                89
              </td>
            
          
            
            
              <td class="unsolved">
                90
              </td>
            
          
            
            
              <td class="unsolved">
                91
              </td>
            
          
            
            
              <td class="unsolved">
                92
              </td>
            
          
            
            
              <td class="unsolved">
                93
              </td>
            
          
            
            
              <td class="unsolved">
                94
              </td>
            
          
            
            
              <td class="unsolved">
                95
              </td>
            
          
            
            
              <td class="unsolved">
                96
              </td>
            
          
            
            
              <td class="unsolved">
                97
              </td>
            
          
            
            
              <td class="unsolved">
                98
              </td>
            
          
            
            
              <td class="unsolved">
                99
              </td>
            
          
            
            
              <td class="unsolved">
                100
              </td>
            
          
        </tr>
      
    
  </table>
<aside id="gcman-toolbar">
    
    <a title="Raw source" class="raw" href="https://gautammanohar.com//src.md" type="text/plain">
        <i class="fas fa-code" aria-hidden="true"></i>
    </a>
    <a title="Home" class="home" href="https://gautammanohar.com/blog/">
        <i class="fas fa-home"></i>
    </a>
    <a title="PDF" class="pdf" href="https://gautammanohar.com//post.pdf">
        <i class="far fa-file-pdf" aria-hidden="true"></i>
    </a>
    
</aside></article>
	<script>
			$('.title a').html(function(index, value) {
				return value.replace(/(\d+)/g, '<span style="font-size: 1.5em;">$1</span>');
		});
	</script>
	<script defer="" src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
	</body>
</html>